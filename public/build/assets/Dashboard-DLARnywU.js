import{_ as de}from"./AppLayout.vue_vue_type_script_setup_true_lang-CWaGmTbq.js";import{d as h,r as C,a as te,o as re,c as x,b as g,e as l,u as t,w as a,f as r,g as d,h as T,t as c,i as K,F as W,j as Y,k as ie,l as R,n as fe,m as me,p as _e}from"./app-C8xS1YZf.js";import{_ as U,a as z,b as q,c as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-D2G3korc.js";import{_ as V,c as ce}from"./index-CRm8f-Jm.js";import{_ as I,a as D}from"./Label.vue_vue_type_script_setup_true_lang-BEXDyzNP.js";import{_ as pe,a as ve,b as ge,c as ye,d as be}from"./DialogTitle.vue_vue_type_script_setup_true_lang-cu1AyQ8K.js";import{_ as xe,T as ke,a as P,b as S,c as Ce,d as O}from"./TableCell-DWdYwRLV.js";import"./useForwardExpose-Da5Husq0.js";import"./RovingFocusGroup-DTMeHgYG.js";var Ne=typeof global=="object"&&global&&global.Object===Object&&global,$e=typeof self=="object"&&self&&self.Object===Object&&self,se=Ne||$e||Function("return this")(),H=se.Symbol,ue=Object.prototype,Ie=ue.hasOwnProperty,De=ue.toString,w=H?H.toStringTag:void 0;function Oe(n){var i=Ie.call(n,w),p=n[w];try{n[w]=void 0;var y=!0}catch{}var b=De.call(n);return y&&(i?n[w]=p:delete n[w]),b}var Te=Object.prototype,Ve=Te.toString;function Ee(n){return Ve.call(n)}var je="[object Null]",Se="[object Undefined]",le=H?H.toStringTag:void 0;function Ae(n){return n==null?n===void 0?Se:je:le&&le in Object(n)?Oe(n):Ee(n)}function we(n){return n!=null&&typeof n=="object"}var Re="[object Symbol]";function Ue(n){return typeof n=="symbol"||we(n)&&Ae(n)==Re}var Le=/\s/;function Be(n){for(var i=n.length;i--&&Le.test(n.charAt(i)););return i}var Fe=/^\s+/;function Me(n){return n&&n.slice(0,Be(n)+1).replace(Fe,"")}function Z(n){var i=typeof n;return n!=null&&(i=="object"||i=="function")}var ae=NaN,Pe=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,ze=/^0o[0-7]+$/i,qe=parseInt;function ne(n){if(typeof n=="number")return n;if(Ue(n))return ae;if(Z(n)){var i=typeof n.valueOf=="function"?n.valueOf():n;n=Z(i)?i+"":i}if(typeof n!="string")return n===0?n:+n;n=Me(n);var p=We.test(n);return p||ze.test(n)?qe(n.slice(2),p?2:8):Pe.test(n)?ae:+n}var Q=function(){return se.Date.now()},He="Expected a function",Ge=Math.max,Xe=Math.min;function Je(n,i,p){var y,b,k,f,_,v,N=0,u=!1,m=!1,$=!0;if(typeof n!="function")throw new TypeError(He);i=ne(i)||0,Z(p)&&(u=!!p.leading,m="maxWait"in p,k=m?Ge(ne(p.maxWait)||0,i):k,$="trailing"in p?!!p.trailing:$);function E(e){var o=y,j=b;return y=b=void 0,N=e,f=n.apply(j,o),f}function B(e){return N=e,_=setTimeout(A,i),u?E(e):f}function G(e){var o=e-v,j=e-N,ee=i-o;return m?Xe(ee,k-j):ee}function F(e){var o=e-v,j=e-N;return v===void 0||o>=i||o<0||m&&j>=k}function A(){var e=Q();if(F(e))return M(e);_=setTimeout(A,G(e))}function M(e){return _=void 0,$&&y?E(e):(y=b=void 0,f)}function X(){_!==void 0&&clearTimeout(_),N=0,y=v=b=_=void 0}function J(){return _===void 0?f:M(Q())}function s(){var e=Q(),o=F(e);if(y=arguments,b=this,v=e,o){if(_===void 0)return B(v);if(m)return clearTimeout(_),_=setTimeout(A,i),E(v)}return _===void 0&&(_=setTimeout(A,i)),f}return s.cancel=X,s.flush=J,s}const Ke={class:"space-y-4"},Qe={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ye={class:"flex justify-between items-center mt-4"},Ze={class:"overflow-x-auto"},he={key:0,class:"ml-1"},et={key:0,class:"ml-1"},tt={key:0,class:"ml-1"},lt={class:"flex justify-end space-x-2"},at={key:0,class:"flex items-center justify-between px-4 py-4 border-t"},nt={class:"text-sm text-muted-foreground"},ot={class:"flex items-center space-x-2"},rt={class:"text-sm"},st={key:0},ut=h({__name:"ClockingDataTable",setup(n){const i=C([]),p=C(!1),y=C(!1),b=C(!1),k=C(null),f=C({current_page:1,last_page:1,per_page:15,total:0,from:0,to:0}),_=te({name:"",ac_no:"",date_from:"",date_to:""}),v=C("Date"),N=C("desc"),u=te({AC_No:"",Name:"",Date:"",Clock_In:"",Clock_Out:"",Entry_ID:""}),m=async(s=1)=>{p.value=!0;try{const e={page:s,per_page:f.value.per_page,sort_by:v.value,sort_order:N.value,..._},o=await R.get("/api/clocking",{params:e});i.value=o.data.data,f.value={current_page:o.data.current_page,last_page:o.data.last_page,per_page:o.data.per_page,total:o.data.total,from:o.data.from,to:o.data.to}}catch(e){console.error("Error fetching data:",e)}finally{p.value=!1}},$=Je(()=>{m(1)},300),E=s=>{v.value===s?N.value=N.value==="asc"?"desc":"asc":(v.value=s,N.value="asc"),m(1)},B=s=>{s>=1&&s<=f.value.last_page&&m(s)},G=()=>{Object.assign(_,{name:"",ac_no:"",date_from:"",date_to:""}),m(1)},F=()=>{k.value=null,Object.assign(u,{AC_No:"",Name:"",Date:"",Clock_In:"",Clock_Out:"",Entry_ID:""}),b.value=!0},A=s=>{k.value=s,Object.assign(u,{id:s.id||"",AC_No:s.AC_No,Name:s.Name,Date:s.Date,Clock_In:s.Clock_In||"",Clock_Out:s.Clock_Out||"",Entry_ID:s.Entry_ID}),b.value=!0},M=async()=>{y.value=!0;try{const s={AC_No:parseInt(u.AC_No)||0,Name:u.Name,Date:u.Date,Clock_In:u.Clock_In||null,Clock_Out:u.Clock_Out||null,Entry_ID:parseInt(u.Entry_ID)||null};if(k.value){const e=await R.put(`/api/clocking/${k.value.id}`,s);console.log("Update response:",e.data)}else{const e=await R.post("/api/clocking",s);console.log("Create response:",e.data)}b.value=!1,m(f.value.current_page)}catch(s){console.error("Error saving record:",s),s.response&&(console.error("Response data:",s.response.data),console.error("Response status:",s.response.status))}finally{y.value=!1}},X=async s=>{if(confirm("Are you sure you want to delete this record?"))try{await R.delete(`/api/clocking/${s}`),m(f.value.current_page)}catch(e){console.error("Error deleting record:",e)}},J=s=>new Date(s).toLocaleDateString();return re(()=>{m()}),(s,e)=>(g(),x("div",Ke,[l(t(U),null,{default:a(()=>[l(t(z),null,{default:a(()=>[l(t(q),null,{default:a(()=>e[17]||(e[17]=[r("Filters")])),_:1,__:[17]})]),_:1}),l(t(L),null,{default:a(()=>[d("div",Qe,[d("div",null,[l(t(I),{for:"name-filter"},{default:a(()=>e[18]||(e[18]=[r("Name")])),_:1,__:[18]}),l(t(D),{id:"name-filter",modelValue:_.name,"onUpdate:modelValue":e[0]||(e[0]=o=>_.name=o),placeholder:"Search by name...",onInput:t($)},null,8,["modelValue","onInput"])]),d("div",null,[l(t(I),{for:"ac-no-filter"},{default:a(()=>e[19]||(e[19]=[r("AC No")])),_:1,__:[19]}),l(t(D),{id:"ac-no-filter",modelValue:_.ac_no,"onUpdate:modelValue":e[1]||(e[1]=o=>_.ac_no=o),placeholder:"Search by AC No...",onInput:t($)},null,8,["modelValue","onInput"])]),d("div",null,[l(t(I),{for:"date-from"},{default:a(()=>e[20]||(e[20]=[r("Date From")])),_:1,__:[20]}),l(t(D),{id:"date-from",modelValue:_.date_from,"onUpdate:modelValue":e[2]||(e[2]=o=>_.date_from=o),type:"date",onChange:m},null,8,["modelValue"])]),d("div",null,[l(t(I),{for:"date-to"},{default:a(()=>e[21]||(e[21]=[r("Date To")])),_:1,__:[21]}),l(t(D),{id:"date-to",modelValue:_.date_to,"onUpdate:modelValue":e[3]||(e[3]=o=>_.date_to=o),type:"date",onChange:m},null,8,["modelValue"])])]),d("div",Ye,[l(t(V),{onClick:G,variant:"outline"},{default:a(()=>e[22]||(e[22]=[r("Clear Filters")])),_:1,__:[22]}),l(t(V),{onClick:F},{default:a(()=>e[23]||(e[23]=[r("Add New Record")])),_:1,__:[23]})])]),_:1})]),_:1}),l(t(U),null,{default:a(()=>[l(t(L),{class:"p-0"},{default:a(()=>[d("div",Ze,[l(t(xe),null,{default:a(()=>[l(t(ke),null,{default:a(()=>[l(t(P),null,{default:a(()=>[l(t(S),null,{default:a(()=>e[24]||(e[24]=[r("Record ID")])),_:1,__:[24]}),l(t(S),{onClick:e[4]||(e[4]=o=>E("AC_No")),class:"cursor-pointer hover:bg-muted/50"},{default:a(()=>[e[25]||(e[25]=r(" AC No ")),v.value==="AC_No"?(g(),x("span",he,c(N.value==="asc"?"↑":"↓"),1)):T("",!0)]),_:1,__:[25]}),l(t(S),{onClick:e[5]||(e[5]=o=>E("Name")),class:"cursor-pointer hover:bg-muted/50"},{default:a(()=>[e[26]||(e[26]=r(" Name ")),v.value==="Name"?(g(),x("span",et,c(N.value==="asc"?"↑":"↓"),1)):T("",!0)]),_:1,__:[26]}),l(t(S),{onClick:e[6]||(e[6]=o=>E("Date")),class:"cursor-pointer hover:bg-muted/50"},{default:a(()=>[e[27]||(e[27]=r(" Date ")),v.value==="Date"?(g(),x("span",tt,c(N.value==="asc"?"↑":"↓"),1)):T("",!0)]),_:1,__:[27]}),l(t(S),null,{default:a(()=>e[28]||(e[28]=[r("Clock In")])),_:1,__:[28]}),l(t(S),null,{default:a(()=>e[29]||(e[29]=[r("Clock Out")])),_:1,__:[29]}),l(t(S),{class:"text-right"},{default:a(()=>e[30]||(e[30]=[r("Actions")])),_:1,__:[30]})]),_:1})]),_:1}),l(t(Ce),null,{default:a(()=>[p.value?(g(),K(t(P),{key:0},{default:a(()=>[l(t(O),{colspan:"7",class:"text-center py-8"},{default:a(()=>e[31]||(e[31]=[d("div",{class:"flex items-center justify-center space-x-2"},[d("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),d("span",null,"Loading...")],-1)])),_:1,__:[31]})]),_:1})):i.value.length===0?(g(),K(t(P),{key:1},{default:a(()=>[l(t(O),{colspan:"7",class:"text-center py-8 text-muted-foreground"},{default:a(()=>e[32]||(e[32]=[r(" No records found ")])),_:1,__:[32]})]),_:1})):(g(!0),x(W,{key:2},Y(i.value,o=>(g(),K(t(P),{key:o.id},{default:a(()=>[l(t(O),null,{default:a(()=>[r(c(o.id||"-"),1)]),_:2},1024),l(t(O),null,{default:a(()=>[r(c(o.AC_No),1)]),_:2},1024),l(t(O),null,{default:a(()=>[r(c(o.Name),1)]),_:2},1024),l(t(O),null,{default:a(()=>[r(c(J(o.Date)),1)]),_:2},1024),l(t(O),null,{default:a(()=>[r(c(o.Clock_In||"-"),1)]),_:2},1024),l(t(O),null,{default:a(()=>[r(c(o.Clock_Out||"-"),1)]),_:2},1024),l(t(O),{class:"text-right"},{default:a(()=>[d("div",lt,[l(t(V),{onClick:j=>A(o),size:"sm",variant:"outline"},{default:a(()=>e[33]||(e[33]=[r(" Edit ")])),_:2,__:[33]},1032,["onClick"]),l(t(V),{onClick:j=>X(o.id),size:"sm",variant:"destructive"},{default:a(()=>e[34]||(e[34]=[r(" Delete ")])),_:2,__:[34]},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),f.value.total>0?(g(),x("div",at,[d("div",nt," Showing "+c(f.value.from)+" to "+c(f.value.to)+" of "+c(f.value.total)+" results ",1),d("div",ot,[l(t(V),{onClick:e[7]||(e[7]=o=>B(f.value.current_page-1)),disabled:f.value.current_page<=1,size:"sm",variant:"outline"},{default:a(()=>e[35]||(e[35]=[r(" Previous ")])),_:1,__:[35]},8,["disabled"]),d("span",rt," Page "+c(f.value.current_page)+" of "+c(f.value.last_page),1),l(t(V),{onClick:e[8]||(e[8]=o=>B(f.value.current_page+1)),disabled:f.value.current_page>=f.value.last_page,size:"sm",variant:"outline"},{default:a(()=>e[36]||(e[36]=[r(" Next ")])),_:1,__:[36]},8,["disabled"])])])):T("",!0)]),_:1})]),_:1}),l(t(pe),{open:b.value,"onUpdate:open":e[16]||(e[16]=o=>b.value=o)},{default:a(()=>[l(t(ve),{class:"sm:max-w-md"},{default:a(()=>[l(t(ge),null,{default:a(()=>[l(t(ye),null,{default:a(()=>[r(c(k.value?"Edit Record":"Create New Record"),1)]),_:1})]),_:1}),d("form",{onSubmit:ie(M,["prevent"]),class:"space-y-4"},[d("div",null,[l(t(I),{for:"ac-no"},{default:a(()=>e[37]||(e[37]=[r("AC No")])),_:1,__:[37]}),l(t(D),{id:"ac-no",modelValue:u.AC_No,"onUpdate:modelValue":e[9]||(e[9]=o=>u.AC_No=o),modelModifiers:{number:!0},type:"number",placeholder:"Enter AC No...",required:""},null,8,["modelValue"])]),k.value?T("",!0):(g(),x("div",st,[l(t(I),{for:"entry-id"},{default:a(()=>e[38]||(e[38]=[r("Entry ID")])),_:1,__:[38]}),l(t(D),{id:"entry-id",modelValue:u.Entry_ID,"onUpdate:modelValue":e[10]||(e[10]=o=>u.Entry_ID=o),modelModifiers:{number:!0},type:"number",placeholder:"Enter Entry ID..."},null,8,["modelValue"])])),d("div",null,[l(t(I),{for:"clock-in"},{default:a(()=>e[39]||(e[39]=[r("Clock In")])),_:1,__:[39]}),l(t(D),{id:"clock-in",modelValue:u.Clock_In,"onUpdate:modelValue":e[11]||(e[11]=o=>u.Clock_In=o),type:"time",step:"1"},null,8,["modelValue"])]),d("div",null,[l(t(I),{for:"clock-out"},{default:a(()=>e[40]||(e[40]=[r("Clock Out")])),_:1,__:[40]}),l(t(D),{id:"clock-out",modelValue:u.Clock_Out,"onUpdate:modelValue":e[12]||(e[12]=o=>u.Clock_Out=o),type:"time",step:"1"},null,8,["modelValue"])]),d("div",null,[l(t(I),{for:"name"},{default:a(()=>e[41]||(e[41]=[r("Name *")])),_:1,__:[41]}),l(t(D),{id:"name",modelValue:u.Name,"onUpdate:modelValue":e[13]||(e[13]=o=>u.Name=o),required:""},null,8,["modelValue"])]),d("div",null,[l(t(I),{for:"date"},{default:a(()=>e[42]||(e[42]=[r("Date *")])),_:1,__:[42]}),l(t(D),{id:"date",modelValue:u.Date,"onUpdate:modelValue":e[14]||(e[14]=o=>u.Date=o),type:"date",required:""},null,8,["modelValue"])]),l(t(be),null,{default:a(()=>[l(t(V),{type:"button",onClick:e[15]||(e[15]=o=>b.value=!1),variant:"outline"},{default:a(()=>e[43]||(e[43]=[r(" Cancel ")])),_:1,__:[43]}),l(t(V),{type:"submit",disabled:y.value},{default:a(()=>[r(c(y.value?"Saving...":k.value?"Update":"Create"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]))}}),oe=h({__name:"Badge",props:{class:{}},setup(n){const i=ce("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),p=n;return(y,b)=>(g(),x("div",{class:fe(t(i)({variant:y.variant,class:p.class}))},[me(y.$slots,"default")],2))}}),dt={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},it={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},ft={class:"text-2xl font-bold text-red-600"},mt={key:0,class:"mt-3 space-y-1"},_t={class:"font-medium"},ct={key:0,class:"text-xs text-muted-foreground"},pt={class:"text-2xl font-bold text-blue-600"},vt={key:0,class:"mt-3 space-y-1"},gt={class:"font-medium"},yt={key:0,class:"text-xs text-muted-foreground"},bt={class:"text-2xl font-bold text-green-600"},xt={class:"flex-1"},Et=h({__name:"Dashboard",setup(n){const i=[{title:"Dashboard",href:"/dashboard"}],p=C(!1),y=C(0),b=C(0),k=C(0),f=C([]),_=C(0),v=C([]);return re(async()=>{p.value=!0;try{const{data:u}=await R.get("/api/dashboard-stats");y.value=u.total_records,b.value=u.today_entries,k.value=u.currently_logged_in,f.value=u.logged_in_employees,_.value=u.currently_logged_out,v.value=u.logged_out_employees}catch(u){console.error("Error fetching stats:",u)}finally{p.value=!1}}),(u,m)=>(g(),x(W,null,[l(t(_e),{title:"Dashboard"}),l(de,{breadcrumbs:i},{default:a(()=>[d("div",dt,[d("div",it,[l(t(U),{class:"border-l-4 border-l-red-500"},{default:a(()=>[l(t(z),{class:"pb-2"},{default:a(()=>[l(t(q),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>m[0]||(m[0]=[r(" Without Clock Out ")])),_:1,__:[0]})]),_:1}),l(t(L),null,{default:a(()=>[d("div",ft,c(p.value?"...":k.value),1),m[1]||(m[1]=d("p",{class:"text-xs text-muted-foreground mt-1"}," Employees without clock out: ",-1)),f.value.length?(g(),x("div",mt,[(g(!0),x(W,null,Y(f.value.slice(0,3),$=>(g(),x("div",{key:$.AC_No,class:"flex items-center justify-between text-xs"},[d("span",_t,c($.Name),1),l(t(oe),{variant:"outline",class:"text-xs"},{default:a(()=>[r(c($.Clock_In),1)]),_:2},1024)]))),128)),f.value.length>3?(g(),x("div",ct," +"+c(f.value.length-3)+" more ",1)):T("",!0)])):T("",!0)]),_:1,__:[1]})]),_:1}),l(t(U),{class:"border-l-4 border-l-blue-500"},{default:a(()=>[l(t(z),{class:"pb-2"},{default:a(()=>[l(t(q),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>m[2]||(m[2]=[r(" Without Clock In ")])),_:1,__:[2]})]),_:1}),l(t(L),null,{default:a(()=>[d("div",pt,c(p.value?"...":_.value),1),m[3]||(m[3]=d("p",{class:"text-xs text-muted-foreground mt-1"}," Employees without clock In: ",-1)),v.value.length?(g(),x("div",vt,[(g(!0),x(W,null,Y(v.value.slice(0,3),$=>(g(),x("div",{key:$.AC_No,class:"flex items-center justify-between text-xs"},[d("span",gt,c($.Name),1),l(t(oe),{variant:"outline",class:"text-xs"},{default:a(()=>[r(c($.Clock_Out),1)]),_:2},1024)]))),128)),v.value.length>3?(g(),x("div",yt," +"+c(v.value.length-3)+" more ",1)):T("",!0)])):T("",!0)]),_:1,__:[3]})]),_:1}),l(t(U),{class:"border-l-4 border-l-green-500"},{default:a(()=>[l(t(z),{class:"pb-2"},{default:a(()=>[l(t(q),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>m[4]||(m[4]=[r(" Total Records ")])),_:1,__:[4]})]),_:1}),l(t(L),null,{default:a(()=>[d("div",bt,c(p.value?"...":y.value),1),m[5]||(m[5]=d("p",{class:"text-xs text-muted-foreground mt-1"}," All time clocking records ",-1))]),_:1,__:[5]})]),_:1})]),d("div",xt,[l(ut)])])]),_:1})],64))}});export{Et as default};

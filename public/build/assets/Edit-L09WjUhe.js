import{d as L,x as S,r as E,b as U,e as g,f as l,u as e,q as B,w as o,j as a,i as r,l as X,t as u,g as M,h as N,F as z}from"./app-SFb2zInB.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-CQmFckDX.js";import{c as h,_ as f}from"./index-CbHqO0W5.js";import{_ as p,a as v}from"./Label.vue_vue_type_script_setup_true_lang-7hqQEBdS.js";import{_ as q,a as I,b as O,c as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-DFtRfmVV.js";import{_ as j}from"./CardDescription.vue_vue_type_script_setup_true_lang-DDBHt1fo.js";import{_ as b}from"./InputError.vue_vue_type_script_setup_true_lang-DdPLF5Om.js";import{_ as A}from"./FileUpload.vue_vue_type_script_setup_true_lang-Dh5M7Rwc.js";import{L as P}from"./loader-circle-BGHlBp9N.js";import"./useForwardExpose-QsExlC0D.js";import"./RovingFocusGroup-7AlOQywy.js";import"./file-Bq8KTq2i.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=h("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),R={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},G={class:"flex items-center gap-4"},J={class:"space-y-2"},K={class:"space-y-2"},Q={class:"space-y-2"},W={class:"text-xs text-muted-foreground"},Y={class:"flex gap-4 pt-4"},ue=L({__name:"Edit",props:{form:{}},setup(y){const n=y,w=[{title:"Forms",href:"/forms"},{title:"Edit",href:`/forms/${n.form.id}/edit`}],s=S({name:n.form.name,date:n.form.date,file:null,_method:"PUT"}),m=E(null);function $(d){var x;const i=((x=d.target.files)==null?void 0:x[0])??s.file;if(!i){m.value="Please select a file.",s.file=null;return}const c=i.name.toLowerCase(),_=c.split(".").pop(),k=["csv","xls","xlsx"],F=/\.(?:csv|xls|xlsx)\.(?:csv|xls|xlsx)$/i;!_||!k.includes(_)||F.test(c)?(m.value="Invalid file type. Only CSV, XLS, XLSX allowed.",s.file=null):(m.value=null,s.file=i)}function C(){window.location.href=route("forms.downloadCsv")}function V(){s.post(route("forms.update",n.form.id),{forceFormData:!0})}return(d,t)=>(g(),U(z,null,[l(e(B),{title:"Edit Form"}),l(D,{breadcrumbs:w},{default:o(()=>[a("div",R,[a("div",G,[l(e(f),{variant:"outline",size:"sm",onClick:t[0]||(t[0]=i=>d.$inertia.visit(d.route("forms.index"))),class:"flex items-center gap-2"},{default:o(()=>[l(e(H),{class:"h-4 w-4"}),t[5]||(t[5]=r(" Back to Forms "))]),_:1,__:[5]}),t[6]||(t[6]=a("div",{class:"flex flex-col space-y-2"},[a("h1",{class:"text-2xl font-semibold tracking-tight"},"Edit Form"),a("p",{class:"text-muted-foreground"}," Update your form information below. ")],-1))]),l(e(q),{class:"max-w-2xl"},{default:o(()=>[l(e(I),{class:"flex justify-between items-center"},{default:o(()=>[a("div",null,[l(e(O),null,{default:o(()=>t[7]||(t[7]=[r("Edit Form Submission")])),_:1,__:[7]}),l(e(j),null,{default:o(()=>t[8]||(t[8]=[r(" Modify your name, date, and optionally update the file. ")])),_:1,__:[8]})]),l(e(f),{variant:"outline",size:"sm",onClick:C},{default:o(()=>t[9]||(t[9]=[r(" Download Template ")])),_:1,__:[9]})]),_:1}),l(e(T),null,{default:o(()=>[a("form",{onSubmit:X(V,["prevent"]),class:"space-y-6"},[a("div",J,[l(e(p),{for:"name"},{default:o(()=>t[10]||(t[10]=[r("Name *")])),_:1,__:[10]}),l(e(v),{id:"name",modelValue:e(s).name,"onUpdate:modelValue":t[1]||(t[1]=i=>e(s).name=i),type:"text",placeholder:"Enter your full name",required:"",disabled:e(s).processing},null,8,["modelValue","disabled"]),l(b,{message:e(s).errors.name},null,8,["message"])]),a("div",K,[l(e(p),{for:"date"},{default:o(()=>t[11]||(t[11]=[r("Date *")])),_:1,__:[11]}),l(e(v),{id:"date",modelValue:e(s).date,"onUpdate:modelValue":t[2]||(t[2]=i=>e(s).date=i),type:"date",required:"",disabled:e(s).processing},null,8,["modelValue","disabled"]),l(b,{message:e(s).errors.date},null,8,["message"])]),a("div",Q,[l(e(p),null,{default:o(()=>[r(u(n.form.file_original_name?"Replace File (Optional)":"File Upload (Optional)"),1)]),_:1}),l(A,{modelValue:e(s).file,"onUpdate:modelValue":t[3]||(t[3]=i=>e(s).file=i),error:m.value??e(s).errors.file,accept:".csv,.xls,.xlsx",onChange:$,"max-size":10,placeholder:n.form.file_original_name?"Choose a new file to replace current one":"Choose a file or drag and drop"},null,8,["modelValue","error","placeholder"]),a("p",W," Supported formats: XLSX, XLS, CSV (Max: 10MB) "+u(n.form.file_original_name?" â€“ Leave empty to keep current file":""),1)]),a("div",Y,[l(e(f),{type:"submit",disabled:e(s).processing,class:"flex items-center gap-2"},{default:o(()=>[e(s).processing?(g(),M(e(P),{key:0,class:"h-4 w-4 animate-spin"})):N("",!0),r(" "+u(e(s).processing?"Updating...":"Update Form"),1)]),_:1},8,["disabled"]),l(e(f),{type:"button",variant:"outline",disabled:e(s).processing,onClick:t[4]||(t[4]=i=>d.$inertia.visit(d.route("forms.index")))},{default:o(()=>t[12]||(t[12]=[r(" Cancel ")])),_:1,__:[12]},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1})],64))}});export{ue as default};

import{_ as fe}from"./AppLayout.vue_vue_type_script_setup_true_lang-DhqJuWPQ.js";import{d as L,c as g,o as p,a as i,r as w,b as C,e as ne,f as ue,g as l,u as t,w as a,h as r,i as T,t as v,j as Y,F as z,k as ee,l as _e,m as R,n as ce,p as me}from"./app-BjF1ciGN.js";import{_ as U,a as q,b as H,c as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-CMaGS7su.js";import{_ as V,c as pe}from"./index-f78_mURB.js";import{_ as I,a as D}from"./Label.vue_vue_type_script_setup_true_lang-ChkhZMeX.js";import{_ as ve,a as ge,b as be,c as ye,d as xe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BZugXW6M.js";import"./useForwardExpose-ef9a8bio.js";import"./RovingFocusGroup-V17Yudn7.js";var ke=typeof global=="object"&&global&&global.Object===Object&&global,Ce=typeof self=="object"&&self&&self.Object===Object&&self,de=ke||Ce||Function("return this")(),G=de.Symbol,ie=Object.prototype,$e=ie.hasOwnProperty,Ne=ie.toString,h=G?G.toStringTag:void 0;function Ie(n){var s=$e.call(n,h),_=n[h];try{n[h]=void 0;var b=!0}catch{}var x=Ne.call(n);return b&&(s?n[h]=_:delete n[h]),x}var De=Object.prototype,Oe=De.toString;function Te(n){return Oe.call(n)}var Ve="[object Null]",Ee="[object Undefined]",ae=G?G.toStringTag:void 0;function je(n){return n==null?n===void 0?Ee:Ve:ae&&ae in Object(n)?Ie(n):Te(n)}function Se(n){return n!=null&&typeof n=="object"}var we="[object Symbol]";function Ae(n){return typeof n=="symbol"||Se(n)&&je(n)==we}var he=/\s/;function Re(n){for(var s=n.length;s--&&he.test(n.charAt(s)););return s}var Ue=/^\s+/;function Be(n){return n&&n.slice(0,Re(n)+1).replace(Ue,"")}function te(n){var s=typeof n;return n!=null&&(s=="object"||s=="function")}var oe=NaN,Le=/^[-+]0x[0-9a-f]+$/i,Fe=/^0b[01]+$/i,Me=/^0o[0-7]+$/i,Pe=parseInt;function se(n){if(typeof n=="number")return n;if(Ae(n))return oe;if(te(n)){var s=typeof n.valueOf=="function"?n.valueOf():n;n=te(s)?s+"":s}if(typeof n!="string")return n===0?n:+n;n=Be(n);var _=Fe.test(n);return _||Me.test(n)?Pe(n.slice(2),_?2:8):Le.test(n)?oe:+n}var Z=function(){return de.Date.now()},We="Expected a function",ze=Math.max,qe=Math.min;function He(n,s,_){var b,x,k,f,m,y,$=0,d=!1,c=!1,N=!0;if(typeof n!="function")throw new TypeError(We);s=se(s)||0,te(_)&&(d=!!_.leading,c="maxWait"in _,k=c?ze(se(_.maxWait)||0,s):k,N="trailing"in _?!!_.trailing:N);function E(e){var o=b,j=x;return b=x=void 0,$=e,f=n.apply(j,o),f}function F(e){return $=e,m=setTimeout(A,s),d?E(e):f}function J(e){var o=e-y,j=e-$,le=s-o;return c?qe(le,k-j):le}function M(e){var o=e-y,j=e-$;return y===void 0||o>=s||o<0||c&&j>=k}function A(){var e=Z();if(M(e))return P(e);m=setTimeout(A,J(e))}function P(e){return m=void 0,N&&b?E(e):(b=x=void 0,f)}function K(){m!==void 0&&clearTimeout(m),$=0,b=y=x=m=void 0}function Q(){return m===void 0?f:P(Z())}function u(){var e=Z(),o=M(e);if(b=arguments,x=this,y=e,o){if(m===void 0)return F(y);if(c)return clearTimeout(m),m=setTimeout(A,s),E(y)}return m===void 0&&(m=setTimeout(A,s)),f}return u.cancel=K,u.flush=Q,u}const Ge={class:"relative w-full overflow-auto"},Xe={class:"w-full caption-bottom text-sm"},Je=L({__name:"Table",setup(n){return(s,_)=>(p(),g("div",Ge,[i("table",Xe,[w(s.$slots,"default")])]))}}),X=(n,s)=>{const _=n.__vccOpts||n;for(const[b,x]of s)_[b]=x;return _},Ke={},Qe={class:"border-b"};function Ye(n,s){return p(),g("thead",Qe,[w(n.$slots,"default")])}const Ze=X(Ke,[["render",Ye]]),et={class:"[&_tr:last-child]:border-0"},tt=L({__name:"TableBody",setup(n){return(s,_)=>(p(),g("tbody",et,[w(s.$slots,"default")]))}}),lt={},nt={class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"};function at(n,s){return p(),g("tr",nt,[w(n.$slots,"default")])}const W=X(lt,[["render",at]]),ot={},st={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"};function rt(n,s){return p(),g("th",st,[w(n.$slots,"default")])}const S=X(ot,[["render",rt]]),ut={},dt={class:"p-4 align-middle [&:has([role=checkbox])]:pr-0"};function it(n,s){return p(),g("td",dt,[w(n.$slots,"default")])}const O=X(ut,[["render",it]]),ft={class:"space-y-4"},_t={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ct={class:"flex justify-between items-center mt-4"},mt={class:"overflow-x-auto"},pt={key:0,class:"ml-1"},vt={key:0,class:"ml-1"},gt={key:0,class:"ml-1"},bt={class:"flex justify-end space-x-2"},yt={key:0,class:"flex items-center justify-between px-4 py-4 border-t"},xt={class:"text-sm text-muted-foreground"},kt={class:"flex items-center space-x-2"},Ct={class:"text-sm"},$t={key:0},Nt=L({__name:"ClockingDataTable",setup(n){const s=C([]),_=C(!1),b=C(!1),x=C(!1),k=C(null),f=C({current_page:1,last_page:1,per_page:15,total:0,from:0,to:0}),m=ne({name:"",ac_no:"",date_from:"",date_to:""}),y=C("Date"),$=C("desc"),d=ne({AC_No:"",Name:"",Date:"",Clock_In:"",Clock_Out:"",Entry_ID:""}),c=async(u=1)=>{_.value=!0;try{const e={page:u,per_page:f.value.per_page,sort_by:y.value,sort_order:$.value,...m},o=await R.get("/api/clocking",{params:e});s.value=o.data.data,f.value={current_page:o.data.current_page,last_page:o.data.last_page,per_page:o.data.per_page,total:o.data.total,from:o.data.from,to:o.data.to}}catch(e){console.error("Error fetching data:",e)}finally{_.value=!1}},N=He(()=>{c(1)},300),E=u=>{y.value===u?$.value=$.value==="asc"?"desc":"asc":(y.value=u,$.value="asc"),c(1)},F=u=>{u>=1&&u<=f.value.last_page&&c(u)},J=()=>{Object.assign(m,{name:"",ac_no:"",date_from:"",date_to:""}),c(1)},M=()=>{k.value=null,Object.assign(d,{AC_No:"",Name:"",Date:"",Clock_In:"",Clock_Out:"",Entry_ID:""}),x.value=!0},A=u=>{k.value=u,Object.assign(d,{id:u.id||"",AC_No:u.AC_No,Name:u.Name,Date:u.Date,Clock_In:u.Clock_In||"",Clock_Out:u.Clock_Out||"",Entry_ID:u.Entry_ID}),x.value=!0},P=async()=>{b.value=!0;try{const u={AC_No:parseInt(d.AC_No)||0,Name:d.Name,Date:d.Date,Clock_In:d.Clock_In||null,Clock_Out:d.Clock_Out||null,Entry_ID:parseInt(d.Entry_ID)||null};if(k.value){const e=await R.put(`/api/clocking/${k.value.id}`,u);console.log("Update response:",e.data)}else{const e=await R.post("/api/clocking",u);console.log("Create response:",e.data)}x.value=!1,c(f.value.current_page)}catch(u){console.error("Error saving record:",u),u.response&&(console.error("Response data:",u.response.data),console.error("Response status:",u.response.status))}finally{b.value=!1}},K=async u=>{if(confirm("Are you sure you want to delete this record?"))try{await R.delete(`/api/clocking/${u}`),c(f.value.current_page)}catch(e){console.error("Error deleting record:",e)}},Q=u=>new Date(u).toLocaleDateString();return ue(()=>{c()}),(u,e)=>(p(),g("div",ft,[l(t(U),null,{default:a(()=>[l(t(q),null,{default:a(()=>[l(t(H),null,{default:a(()=>e[17]||(e[17]=[r("Filters")])),_:1,__:[17]})]),_:1}),l(t(B),null,{default:a(()=>[i("div",_t,[i("div",null,[l(t(I),{for:"name-filter"},{default:a(()=>e[18]||(e[18]=[r("Name")])),_:1,__:[18]}),l(t(D),{id:"name-filter",modelValue:m.name,"onUpdate:modelValue":e[0]||(e[0]=o=>m.name=o),placeholder:"Search by name...",onInput:t(N)},null,8,["modelValue","onInput"])]),i("div",null,[l(t(I),{for:"ac-no-filter"},{default:a(()=>e[19]||(e[19]=[r("AC No")])),_:1,__:[19]}),l(t(D),{id:"ac-no-filter",modelValue:m.ac_no,"onUpdate:modelValue":e[1]||(e[1]=o=>m.ac_no=o),placeholder:"Search by AC No...",onInput:t(N)},null,8,["modelValue","onInput"])]),i("div",null,[l(t(I),{for:"date-from"},{default:a(()=>e[20]||(e[20]=[r("Date From")])),_:1,__:[20]}),l(t(D),{id:"date-from",modelValue:m.date_from,"onUpdate:modelValue":e[2]||(e[2]=o=>m.date_from=o),type:"date",onChange:c},null,8,["modelValue"])]),i("div",null,[l(t(I),{for:"date-to"},{default:a(()=>e[21]||(e[21]=[r("Date To")])),_:1,__:[21]}),l(t(D),{id:"date-to",modelValue:m.date_to,"onUpdate:modelValue":e[3]||(e[3]=o=>m.date_to=o),type:"date",onChange:c},null,8,["modelValue"])])]),i("div",ct,[l(t(V),{onClick:J,variant:"outline"},{default:a(()=>e[22]||(e[22]=[r("Clear Filters")])),_:1,__:[22]}),l(t(V),{onClick:M},{default:a(()=>e[23]||(e[23]=[r("Add New Record")])),_:1,__:[23]})])]),_:1})]),_:1}),l(t(U),null,{default:a(()=>[l(t(B),{class:"p-0"},{default:a(()=>[i("div",mt,[l(t(Je),null,{default:a(()=>[l(t(Ze),null,{default:a(()=>[l(t(W),null,{default:a(()=>[l(t(S),null,{default:a(()=>e[24]||(e[24]=[r("Record ID")])),_:1,__:[24]}),l(t(S),{onClick:e[4]||(e[4]=o=>E("AC_No")),class:"cursor-pointer hover:bg-muted/50"},{default:a(()=>[e[25]||(e[25]=r(" AC No ")),y.value==="AC_No"?(p(),g("span",pt,v($.value==="asc"?"↑":"↓"),1)):T("",!0)]),_:1,__:[25]}),l(t(S),{onClick:e[5]||(e[5]=o=>E("Name")),class:"cursor-pointer hover:bg-muted/50"},{default:a(()=>[e[26]||(e[26]=r(" Name ")),y.value==="Name"?(p(),g("span",vt,v($.value==="asc"?"↑":"↓"),1)):T("",!0)]),_:1,__:[26]}),l(t(S),{onClick:e[6]||(e[6]=o=>E("Date")),class:"cursor-pointer hover:bg-muted/50"},{default:a(()=>[e[27]||(e[27]=r(" Date ")),y.value==="Date"?(p(),g("span",gt,v($.value==="asc"?"↑":"↓"),1)):T("",!0)]),_:1,__:[27]}),l(t(S),null,{default:a(()=>e[28]||(e[28]=[r("Clock In")])),_:1,__:[28]}),l(t(S),null,{default:a(()=>e[29]||(e[29]=[r("Clock Out")])),_:1,__:[29]}),l(t(S),{class:"text-right"},{default:a(()=>e[30]||(e[30]=[r("Actions")])),_:1,__:[30]})]),_:1})]),_:1}),l(t(tt),null,{default:a(()=>[_.value?(p(),Y(t(W),{key:0},{default:a(()=>[l(t(O),{colspan:"7",class:"text-center py-8"},{default:a(()=>e[31]||(e[31]=[i("div",{class:"flex items-center justify-center space-x-2"},[i("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),i("span",null,"Loading...")],-1)])),_:1,__:[31]})]),_:1})):s.value.length===0?(p(),Y(t(W),{key:1},{default:a(()=>[l(t(O),{colspan:"7",class:"text-center py-8 text-muted-foreground"},{default:a(()=>e[32]||(e[32]=[r(" No records found ")])),_:1,__:[32]})]),_:1})):(p(!0),g(z,{key:2},ee(s.value,o=>(p(),Y(t(W),{key:o.id},{default:a(()=>[l(t(O),null,{default:a(()=>[r(v(o.id||"-"),1)]),_:2},1024),l(t(O),null,{default:a(()=>[r(v(o.AC_No),1)]),_:2},1024),l(t(O),null,{default:a(()=>[r(v(o.Name),1)]),_:2},1024),l(t(O),null,{default:a(()=>[r(v(Q(o.Date)),1)]),_:2},1024),l(t(O),null,{default:a(()=>[r(v(o.Clock_In||"-"),1)]),_:2},1024),l(t(O),null,{default:a(()=>[r(v(o.Clock_Out||"-"),1)]),_:2},1024),l(t(O),{class:"text-right"},{default:a(()=>[i("div",bt,[l(t(V),{onClick:j=>A(o),size:"sm",variant:"outline"},{default:a(()=>e[33]||(e[33]=[r(" Edit ")])),_:2,__:[33]},1032,["onClick"]),l(t(V),{onClick:j=>K(o.id),size:"sm",variant:"destructive"},{default:a(()=>e[34]||(e[34]=[r(" Delete ")])),_:2,__:[34]},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),f.value.total>0?(p(),g("div",yt,[i("div",xt," Showing "+v(f.value.from)+" to "+v(f.value.to)+" of "+v(f.value.total)+" results ",1),i("div",kt,[l(t(V),{onClick:e[7]||(e[7]=o=>F(f.value.current_page-1)),disabled:f.value.current_page<=1,size:"sm",variant:"outline"},{default:a(()=>e[35]||(e[35]=[r(" Previous ")])),_:1,__:[35]},8,["disabled"]),i("span",Ct," Page "+v(f.value.current_page)+" of "+v(f.value.last_page),1),l(t(V),{onClick:e[8]||(e[8]=o=>F(f.value.current_page+1)),disabled:f.value.current_page>=f.value.last_page,size:"sm",variant:"outline"},{default:a(()=>e[36]||(e[36]=[r(" Next ")])),_:1,__:[36]},8,["disabled"])])])):T("",!0)]),_:1})]),_:1}),l(t(ve),{open:x.value,"onUpdate:open":e[16]||(e[16]=o=>x.value=o)},{default:a(()=>[l(t(ge),{class:"sm:max-w-md"},{default:a(()=>[l(t(be),null,{default:a(()=>[l(t(ye),null,{default:a(()=>[r(v(k.value?"Edit Record":"Create New Record"),1)]),_:1})]),_:1}),i("form",{onSubmit:_e(P,["prevent"]),class:"space-y-4"},[i("div",null,[l(t(I),{for:"ac-no"},{default:a(()=>e[37]||(e[37]=[r("AC No")])),_:1,__:[37]}),l(t(D),{id:"ac-no",modelValue:d.AC_No,"onUpdate:modelValue":e[9]||(e[9]=o=>d.AC_No=o),modelModifiers:{number:!0},type:"number",placeholder:"Enter AC No...",required:""},null,8,["modelValue"])]),k.value?T("",!0):(p(),g("div",$t,[l(t(I),{for:"entry-id"},{default:a(()=>e[38]||(e[38]=[r("Entry ID")])),_:1,__:[38]}),l(t(D),{id:"entry-id",modelValue:d.Entry_ID,"onUpdate:modelValue":e[10]||(e[10]=o=>d.Entry_ID=o),modelModifiers:{number:!0},type:"number",placeholder:"Enter Entry ID..."},null,8,["modelValue"])])),i("div",null,[l(t(I),{for:"clock-in"},{default:a(()=>e[39]||(e[39]=[r("Clock In")])),_:1,__:[39]}),l(t(D),{id:"clock-in",modelValue:d.Clock_In,"onUpdate:modelValue":e[11]||(e[11]=o=>d.Clock_In=o),type:"time",step:"1"},null,8,["modelValue"])]),i("div",null,[l(t(I),{for:"clock-out"},{default:a(()=>e[40]||(e[40]=[r("Clock Out")])),_:1,__:[40]}),l(t(D),{id:"clock-out",modelValue:d.Clock_Out,"onUpdate:modelValue":e[12]||(e[12]=o=>d.Clock_Out=o),type:"time",step:"1"},null,8,["modelValue"])]),i("div",null,[l(t(I),{for:"name"},{default:a(()=>e[41]||(e[41]=[r("Name *")])),_:1,__:[41]}),l(t(D),{id:"name",modelValue:d.Name,"onUpdate:modelValue":e[13]||(e[13]=o=>d.Name=o),required:""},null,8,["modelValue"])]),i("div",null,[l(t(I),{for:"date"},{default:a(()=>e[42]||(e[42]=[r("Date *")])),_:1,__:[42]}),l(t(D),{id:"date",modelValue:d.Date,"onUpdate:modelValue":e[14]||(e[14]=o=>d.Date=o),type:"date",required:""},null,8,["modelValue"])]),l(t(xe),null,{default:a(()=>[l(t(V),{type:"button",onClick:e[15]||(e[15]=o=>x.value=!1),variant:"outline"},{default:a(()=>e[43]||(e[43]=[r(" Cancel ")])),_:1,__:[43]}),l(t(V),{type:"submit",disabled:b.value},{default:a(()=>[r(v(b.value?"Saving...":k.value?"Update":"Create"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]))}}),re=L({__name:"Badge",props:{class:{}},setup(n){const s=pe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),_=n;return(b,x)=>(p(),g("div",{class:ce(t(s)({variant:b.variant,class:_.class}))},[w(b.$slots,"default")],2))}}),It={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Dt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Ot={class:"text-2xl font-bold text-red-600"},Tt={key:0,class:"mt-3 space-y-1"},Vt={class:"font-medium"},Et={key:0,class:"text-xs text-muted-foreground"},jt={class:"text-2xl font-bold text-blue-600"},St={key:0,class:"mt-3 space-y-1"},wt={class:"font-medium"},At={key:0,class:"text-xs text-muted-foreground"},ht={class:"text-2xl font-bold text-green-600"},Rt={class:"flex-1"},qt=L({__name:"Dashboard",setup(n){const s=[{title:"Dashboard",href:"/dashboard"}],_=C(!1),b=C(0),x=C(0),k=C(0),f=C([]),m=C(0),y=C([]);return ue(async()=>{_.value=!0;try{const{data:d}=await R.get("/api/dashboard-stats");b.value=d.total_records,x.value=d.today_entries,k.value=d.currently_logged_in,f.value=d.logged_in_employees,m.value=d.currently_logged_out,y.value=d.logged_out_employees}catch(d){console.error("Error fetching stats:",d)}finally{_.value=!1}}),(d,c)=>(p(),g(z,null,[l(t(me),{title:"Dashboard"}),l(fe,{breadcrumbs:s},{default:a(()=>[i("div",It,[i("div",Dt,[l(t(U),{class:"border-l-4 border-l-red-500"},{default:a(()=>[l(t(q),{class:"pb-2"},{default:a(()=>[l(t(H),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>c[0]||(c[0]=[r(" Without Clock Out ")])),_:1,__:[0]})]),_:1}),l(t(B),null,{default:a(()=>[i("div",Ot,v(_.value?"...":k.value),1),c[1]||(c[1]=i("p",{class:"text-xs text-muted-foreground mt-1"}," Employees without clock out: ",-1)),f.value.length?(p(),g("div",Tt,[(p(!0),g(z,null,ee(f.value.slice(0,3),N=>(p(),g("div",{key:N.AC_No,class:"flex items-center justify-between text-xs"},[i("span",Vt,v(N.Name),1),l(t(re),{variant:"outline",class:"text-xs"},{default:a(()=>[r(v(N.Clock_In),1)]),_:2},1024)]))),128)),f.value.length>3?(p(),g("div",Et," +"+v(f.value.length-3)+" more ",1)):T("",!0)])):T("",!0)]),_:1,__:[1]})]),_:1}),l(t(U),{class:"border-l-4 border-l-blue-500"},{default:a(()=>[l(t(q),{class:"pb-2"},{default:a(()=>[l(t(H),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>c[2]||(c[2]=[r(" Without Clock In ")])),_:1,__:[2]})]),_:1}),l(t(B),null,{default:a(()=>[i("div",jt,v(_.value?"...":m.value),1),c[3]||(c[3]=i("p",{class:"text-xs text-muted-foreground mt-1"}," Employees without clock In: ",-1)),y.value.length?(p(),g("div",St,[(p(!0),g(z,null,ee(y.value.slice(0,3),N=>(p(),g("div",{key:N.AC_No,class:"flex items-center justify-between text-xs"},[i("span",wt,v(N.Name),1),l(t(re),{variant:"outline",class:"text-xs"},{default:a(()=>[r(v(N.Clock_Out),1)]),_:2},1024)]))),128)),y.value.length>3?(p(),g("div",At," +"+v(y.value.length-3)+" more ",1)):T("",!0)])):T("",!0)]),_:1,__:[3]})]),_:1}),l(t(U),{class:"border-l-4 border-l-green-500"},{default:a(()=>[l(t(q),{class:"pb-2"},{default:a(()=>[l(t(H),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>c[4]||(c[4]=[r(" Total Records ")])),_:1,__:[4]})]),_:1}),l(t(B),null,{default:a(()=>[i("div",ht,v(_.value?"...":b.value),1),c[5]||(c[5]=i("p",{class:"text-xs text-muted-foreground mt-1"}," All time clocking records ",-1))]),_:1,__:[5]})]),_:1})]),i("div",Rt,[l(Nt)])])]),_:1})],64))}});export{qt as default};

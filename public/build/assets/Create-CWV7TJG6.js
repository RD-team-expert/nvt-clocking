import{d as F,r as c,x as S,b as k,e as x,f as t,u as e,q as N,w as o,j as a,i as r,l as B,g as L,h as X,t as D,F as E}from"./app-SFb2zInB.js";import{_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-CQmFckDX.js";import{_ as m}from"./index-CbHqO0W5.js";import{_ as u,a as b}from"./Label.vue_vue_type_script_setup_true_lang-7hqQEBdS.js";import{_ as U,a as q,b as z,c as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-DFtRfmVV.js";import{_ as P}from"./CardDescription.vue_vue_type_script_setup_true_lang-DDBHt1fo.js";import{_ as v}from"./InputError.vue_vue_type_script_setup_true_lang-DdPLF5Om.js";import{_ as T}from"./FileUpload.vue_vue_type_script_setup_true_lang-Dh5M7Rwc.js";import{L as I}from"./loader-circle-BGHlBp9N.js";import"./useForwardExpose-QsExlC0D.js";import"./RovingFocusGroup-7AlOQywy.js";import"./file-Bq8KTq2i.js";const O={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},A={class:"flex gap-2 justify-between item-base items-end"},G={class:"space-y-2"},H={class:"space-y-2"},J={class:"space-y-2"},K={class:"flex gap-4 pt-4"},ne=F({__name:"Create",setup(Q){const g=c([{title:"Forms",href:"/forms"},{title:"Create",href:"/forms/create"}]),l=S({name:"",date:"",file:null}),n=c(null);function y(){window.location.href=route("forms.downloadCsv")}function C(d){var _;const i=((_=d.target.files)==null?void 0:_[0])??l.file;if(!i){n.value="Please select a file.",l.file=null;return}const f=i.name.toLowerCase(),p=f.split(".").pop(),V=["csv","xls","xlsx"],$=/\.(?:csv|xls|xlsx)\.(?:csv|xls|xlsx)$/i;!p||!V.includes(p)||$.test(f)?(n.value="Invalid file type. Only CSV, XLS, XLSX allowed.",l.file=null):(n.value=null,l.file=i)}function w(){l.post(route("forms.store"),{forceFormData:!0,onSuccess:()=>{}})}return(d,s)=>(x(),k(E,null,[t(e(N),{title:"Create Form"}),t(M,{breadcrumbs:g.value},{default:o(()=>[a("div",O,[s[12]||(s[12]=a("div",{class:"flex flex-col space-y-2"},[a("h1",{class:"text-2xl font-semibold tracking-tight"},"Create New Form"),a("p",{class:"text-muted-foreground"},"Fill out the form below to submit your information.")],-1)),t(e(U),{class:"max-w-2xl"},{default:o(()=>[t(e(q),null,{default:o(()=>[a("div",A,[a("div",null,[t(e(z),null,{default:o(()=>s[4]||(s[4]=[r("Form Submission")])),_:1,__:[4]}),t(e(P),null,{default:o(()=>s[5]||(s[5]=[r(" Please provide your name, select a date, and optionally upload a file. ")])),_:1,__:[5]})]),a("div",null,[t(e(m),{variant:"outline",size:"sm",onClick:y},{default:o(()=>s[6]||(s[6]=[r("Download Template")])),_:1,__:[6]})])])]),_:1}),t(e(j),null,{default:o(()=>[a("form",{onSubmit:B(w,["prevent"]),class:"space-y-6"},[a("div",G,[t(e(u),{for:"name"},{default:o(()=>s[7]||(s[7]=[r("Name *")])),_:1,__:[7]}),t(e(b),{id:"name",modelValue:e(l).name,"onUpdate:modelValue":s[0]||(s[0]=i=>e(l).name=i),type:"text",placeholder:"Enter your full name",required:"",disabled:e(l).processing},null,8,["modelValue","disabled"]),t(v,{message:e(l).errors.name},null,8,["message"])]),a("div",H,[t(e(u),{for:"date"},{default:o(()=>s[8]||(s[8]=[r("Date *")])),_:1,__:[8]}),t(e(b),{id:"date",modelValue:e(l).date,"onUpdate:modelValue":s[1]||(s[1]=i=>e(l).date=i),type:"date",required:"",disabled:e(l).processing},null,8,["modelValue","disabled"]),t(v,{message:e(l).errors.date},null,8,["message"])]),a("div",J,[t(e(u),null,{default:o(()=>s[9]||(s[9]=[r("File Upload (Mandatory)")])),_:1,__:[9]}),t(T,{modelValue:e(l).file,"onUpdate:modelValue":s[2]||(s[2]=i=>e(l).file=i),error:n.value??e(l).errors.file,accept:".csv,.xls,.xlsx",onChange:C,"max-size":10,placeholder:"Choose a file or drag and drop"},null,8,["modelValue","error"]),s[10]||(s[10]=a("p",{class:"text-xs text-muted-foreground"}," Supported formats: Xls, Xlsx, Csv (Max Size 10MB) ",-1))]),a("div",K,[t(e(m),{type:"submit",disabled:e(l).processing,class:"flex items-center gap-2"},{default:o(()=>[e(l).processing?(x(),L(e(I),{key:0,class:"h-4 w-4 animate-spin"})):X("",!0),r(" "+D(e(l).processing?"Submitting...":"Submit Form"),1)]),_:1},8,["disabled"]),t(e(m),{type:"button",variant:"outline",disabled:e(l).processing,onClick:s[3]||(s[3]=i=>d.$inertia.visit(d.route("forms.index")))},{default:o(()=>s[11]||(s[11]=[r(" Cancel ")])),_:1,__:[11]},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1},8,["breadcrumbs"])],64))}});export{ne as default};

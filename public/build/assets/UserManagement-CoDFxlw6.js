var Z=Object.defineProperty;var h=(o,t,n)=>t in o?Z(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var _=(o,t,n)=>h(o,typeof t!="symbol"?t+"":t,n);import{H as P,d as ee,x as D,r as k,i as z,b as N,w as l,e as i,u as e,p as se,g,f as d,k as L,c as te,F as ie,j as oe,t as G}from"./app-C8xS1YZf.js";import{_ as le,a as re}from"./Layout.vue_vue_type_script_setup_true_lang-BuC8P7nZ.js";import{_ as E}from"./InputError.vue_vue_type_script_setup_true_lang-D64JyhxE.js";import{_ as V}from"./index-CRm8f-Jm.js";import{_ as ae,a as ne,b as ue,c as de}from"./CardTitle.vue_vue_type_script_setup_true_lang-D2G3korc.js";import{_ as me}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bf1avY1Z.js";import{_ as S,a as F,b as R,c as j,d as H}from"./DialogTitle.vue_vue_type_script_setup_true_lang-cu1AyQ8K.js";import{_ as fe,a as q}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-CGIWNz5V.js";import{_ as C,a as $}from"./Label.vue_vue_type_script_setup_true_lang-BEXDyzNP.js";import{_ as pe,T as ce,a as I,b as A,c as _e,d as M}from"./TableCell-DWdYwRLV.js";import{_ as we}from"./AppLayout.vue_vue_type_script_setup_true_lang-CWaGmTbq.js";import"./useForwardExpose-Da5Husq0.js";import"./RovingFocusGroup-DTMeHgYG.js";let O=1;var ve=class{constructor(){_(this,"subscribers");_(this,"toasts");_(this,"dismissedToasts");_(this,"subscribe",o=>(this.subscribers.push(o),()=>{const t=this.subscribers.indexOf(o);this.subscribers.splice(t,1)}));_(this,"publish",o=>{this.subscribers.forEach(t=>t(o))});_(this,"addToast",o=>{this.publish(o),this.toasts=[...this.toasts,o]});_(this,"create",o=>{var y;const{message:t,...n}=o,a=typeof o.id=="number"||o.id&&((y=o.id)==null?void 0:y.length)>0?o.id:O++,r=this.toasts.find(w=>w.id===a),v=o.dismissible===void 0?!0:o.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),r?this.toasts=this.toasts.map(w=>w.id===a?(this.publish({...w,...o,id:a,title:t}),{...w,...o,id:a,dismissible:v,title:t}):w):this.addToast({title:t,...n,dismissible:v,id:a}),a});_(this,"dismiss",o=>(o?(this.dismissedToasts.add(o),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:o,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),o));_(this,"message",(o,t)=>this.create({...t,message:o,type:"default"}));_(this,"error",(o,t)=>this.create({...t,type:"error",message:o}));_(this,"success",(o,t)=>this.create({...t,type:"success",message:o}));_(this,"info",(o,t)=>this.create({...t,type:"info",message:o}));_(this,"warning",(o,t)=>this.create({...t,type:"warning",message:o}));_(this,"loading",(o,t)=>this.create({...t,type:"loading",message:o}));_(this,"promise",(o,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:o,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(o instanceof Function?o():o);let r=n!==void 0,v;const y=a.then(async f=>{if(v=["resolve",f],P(f))r=!1,this.create({id:n,type:"default",message:f});else if(be(f)&&!f.ok){r=!1;const m=typeof t.error=="function"?await t.error(`HTTP error! status: ${f.status}`):t.error,U=typeof t.description=="function"?await t.description(`HTTP error! status: ${f.status}`):t.description,x=typeof m=="object"&&!P(m)?m:{message:m||"",id:n||""};this.create({id:n,type:"error",description:U,...x})}else if(f instanceof Error){r=!1;const m=typeof t.error=="function"?await t.error(f):t.error,U=typeof t.description=="function"?await t.description(f):t.description,x=typeof m=="object"&&!P(m)?m:{message:m||"",id:n||""};this.create({id:n,type:"error",description:U,...x})}else if(t.success!==void 0){r=!1;const m=typeof t.success=="function"?await t.success(f):t.success,U=typeof t.description=="function"?await t.description(f):t.description,x=typeof m=="object"&&!P(m)?m:{message:m||"",id:n||""};this.create({id:n,type:"success",description:U,...x})}}).catch(async f=>{if(v=["reject",f],t.error!==void 0){r=!1;const c=typeof t.error=="function"?await t.error(f):t.error,m=typeof t.description=="function"?await t.description(f):t.description,T=typeof c=="object"&&!P(c)?c:{message:c||"",id:n||""};this.create({id:n,type:"error",description:m,...T})}}).finally(()=>{var f;r&&(this.dismiss(n),n=void 0),(f=t.finally)==null||f.call(t)}),w=()=>new Promise((f,c)=>y.then(()=>v[0]==="reject"?c(v[1]):f(v[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:w}:Object.assign(n,{unwrap:w})});_(this,"custom",(o,t)=>{const n=(t==null?void 0:t.id)||O++;return this.publish({component:o,id:n,...t}),n});_(this,"getActiveToasts",()=>this.toasts.filter(o=>!this.dismissedToasts.has(o.id)));this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}};const b=new ve;function ge(o,t){const n=(t==null?void 0:t.id)||O++;return b.create({message:o,id:n,type:"default",...t}),n}const be=o=>o&&typeof o=="object"&&"ok"in o&&typeof o.ok=="boolean"&&"status"in o&&typeof o.status=="number",ye=ge,Ue=()=>b.toasts,Ve=()=>b.getActiveToasts(),B=Object.assign(ye,{success:b.success,info:b.info,warning:b.warning,error:b.error,custom:b.custom,message:b.message,promise:b.promise,dismiss:b.dismiss,loading:b.loading},{getHistory:Ue,getToasts:Ve}),Ee={class:"flex flex-col space-y-6"},Ce={class:"flex items-center justify-between"},Me=ee({__name:"UserManagement",props:{users:{}},setup(o){const t=o,n=[{title:"User Management",href:"/settings/user-management"}],a=D({name:"",email:"",password:"",password_confirmation:""}),r=D({id:"",name:"",email:"",password:"",password_confirmation:""}),v=k(!1),y=k(!1),w=k(!1),f=k(null),c=k({name:"",email:"",password:"",password_confirmation:""}),m=k({name:"",email:"",password:"",password_confirmation:""}),U=p=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p),T=()=>{let p=!0;return c.value={name:"",email:"",password:"",password_confirmation:""},a.name.trim()?a.name.length<2&&(c.value.name="Name must be at least 2 characters",p=!1):(c.value.name="Name is required",p=!1),a.email.trim()?U(a.email)||(c.value.email="Please enter a valid email address",p=!1):(c.value.email="Email is required",p=!1),a.password?a.password.length<8&&(c.value.password="Password must be at least 8 characters",p=!1):(c.value.password="Password is required",p=!1),a.password!==a.password_confirmation&&(c.value.password_confirmation="Passwords do not match",p=!1),p},x=()=>{let p=!0;return m.value={name:"",email:"",password:"",password_confirmation:""},r.name.trim()?r.name.length<2&&(m.value.name="Name must be at least 2 characters",p=!1):(m.value.name="Name is required",p=!1),r.email.trim()?U(r.email)||(m.value.email="Please enter a valid email address",p=!1):(m.value.email="Email is required",p=!1),r.password&&(r.password.length<8&&(m.value.password="Password must be at least 8 characters",p=!1),r.password!==r.password_confirmation&&(m.value.password_confirmation="Passwords do not match",p=!1)),p},J=()=>{T()&&a.post(route("users.store"),{onSuccess:()=>{v.value=!1,a.reset(),B.success("User created successfully")}})},K=p=>{f.value=p,r.id=String(p.id),r.name=p.name,r.email=p.email,r.password="",r.password_confirmation="",y.value=!0},Q=()=>{x()&&r.put(route("users.update",{id:r.id}),{onSuccess:()=>{y.value=!1,r.reset(),B.success("User updated successfully")}})},W=p=>{f.value=p,w.value=!0},X=()=>{f.value&&D({}).delete(route("users.destroy",{id:f.value.id}),{onSuccess:()=>{w.value=!1,f.value=null,B.success("User deleted successfully")}})};return(p,s)=>(N(),z(we,{breadcrumbs:n},{default:l(()=>[i(e(se),{title:"User Management"}),i(le,null,{default:l(()=>[g("div",Ee,[g("div",Ce,[i(re,{title:"User Management",description:"Create, edit and manage users"}),i(e(S),{open:v.value,"onUpdate:open":s[5]||(s[5]=u=>v.value=u)},{default:l(()=>[i(e(fe),{asChild:""},{default:l(()=>[i(e(V),null,{default:l(()=>s[14]||(s[14]=[d("Add New User")])),_:1,__:[14]})]),_:1}),i(e(F),null,{default:l(()=>[i(e(R),null,{default:l(()=>[i(e(j),null,{default:l(()=>s[15]||(s[15]=[d("Create New User")])),_:1,__:[15]}),i(e(q),null,{default:l(()=>s[16]||(s[16]=[d(" Fill in the details to create a new user account. ")])),_:1,__:[16]})]),_:1}),g("form",{onSubmit:L(J,["prevent"]),class:"space-y-4"},[g("div",null,[i(e(C),{for:"name"},{default:l(()=>s[17]||(s[17]=[d("Name")])),_:1,__:[17]}),i(e($),{id:"name",modelValue:e(a).name,"onUpdate:modelValue":s[0]||(s[0]=u=>e(a).name=u),type:"text"},null,8,["modelValue"]),i(E,{message:e(a).errors.name||c.value.name},null,8,["message"])]),g("div",null,[i(e(C),{for:"email"},{default:l(()=>s[18]||(s[18]=[d("Email")])),_:1,__:[18]}),i(e($),{id:"email",modelValue:e(a).email,"onUpdate:modelValue":s[1]||(s[1]=u=>e(a).email=u),type:"email"},null,8,["modelValue"]),i(E,{message:e(a).errors.email||c.value.email},null,8,["message"])]),g("div",null,[i(e(C),{for:"password"},{default:l(()=>s[19]||(s[19]=[d("Password")])),_:1,__:[19]}),i(e($),{id:"password",modelValue:e(a).password,"onUpdate:modelValue":s[2]||(s[2]=u=>e(a).password=u),type:"password"},null,8,["modelValue"]),i(E,{message:e(a).errors.password||c.value.password},null,8,["message"])]),g("div",null,[i(e(C),{for:"password_confirmation"},{default:l(()=>s[20]||(s[20]=[d("Confirm Password")])),_:1,__:[20]}),i(e($),{id:"password_confirmation",modelValue:e(a).password_confirmation,"onUpdate:modelValue":s[3]||(s[3]=u=>e(a).password_confirmation=u),type:"password"},null,8,["modelValue"]),i(E,{message:e(a).errors.password_confirmation||c.value.password_confirmation},null,8,["message"])]),i(e(H),null,{default:l(()=>[i(e(V),{type:"button",variant:"outline",onClick:s[4]||(s[4]=u=>v.value=!1)},{default:l(()=>s[21]||(s[21]=[d("Cancel")])),_:1,__:[21]}),i(e(V),{type:"submit",disabled:e(a).processing},{default:l(()=>s[22]||(s[22]=[d("Create User")])),_:1,__:[22]},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),i(e(ae),null,{default:l(()=>[i(e(ne),null,{default:l(()=>[i(e(ue),null,{default:l(()=>s[23]||(s[23]=[d("Users")])),_:1,__:[23]}),i(e(me),null,{default:l(()=>s[24]||(s[24]=[d("Manage your system users")])),_:1,__:[24]})]),_:1}),i(e(de),null,{default:l(()=>[i(e(pe),null,{default:l(()=>[i(e(ce),null,{default:l(()=>[i(e(I),null,{default:l(()=>[i(e(A),null,{default:l(()=>s[25]||(s[25]=[d("Name")])),_:1,__:[25]}),i(e(A),null,{default:l(()=>s[26]||(s[26]=[d("Email")])),_:1,__:[26]}),i(e(A),{class:"text-right"},{default:l(()=>s[27]||(s[27]=[d("Actions")])),_:1,__:[27]})]),_:1})]),_:1}),i(e(_e),null,{default:l(()=>[(N(!0),te(ie,null,oe(t.users,u=>(N(),z(e(I),{key:u.id},{default:l(()=>[i(e(M),null,{default:l(()=>[d(G(u.name),1)]),_:2},1024),i(e(M),null,{default:l(()=>[d(G(u.email),1)]),_:2},1024),i(e(M),{class:"text-right"},{default:l(()=>[i(e(V),{variant:"ghost",size:"sm",onClick:Y=>K(u),class:"mr-2"},{default:l(()=>s[28]||(s[28]=[d("Edit")])),_:2,__:[28]},1032,["onClick"]),i(e(V),{variant:"destructive",size:"sm",onClick:Y=>W(u)},{default:l(()=>s[29]||(s[29]=[d("Delete")])),_:2,__:[29]},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),i(e(S),{open:y.value,"onUpdate:open":s[11]||(s[11]=u=>y.value=u)},{default:l(()=>[i(e(F),null,{default:l(()=>[i(e(R),null,{default:l(()=>[i(e(j),null,{default:l(()=>s[30]||(s[30]=[d("Edit User")])),_:1,__:[30]}),i(e(q),null,{default:l(()=>s[31]||(s[31]=[d(" Update user information. ")])),_:1,__:[31]})]),_:1}),g("form",{onSubmit:L(Q,["prevent"]),class:"space-y-4"},[g("div",null,[i(e(C),{for:"edit-name"},{default:l(()=>s[32]||(s[32]=[d("Name")])),_:1,__:[32]}),i(e($),{id:"edit-name",modelValue:e(r).name,"onUpdate:modelValue":s[6]||(s[6]=u=>e(r).name=u),type:"text"},null,8,["modelValue"]),i(E,{message:e(r).errors.name||m.value.name},null,8,["message"])]),g("div",null,[i(e(C),{for:"edit-email"},{default:l(()=>s[33]||(s[33]=[d("Email")])),_:1,__:[33]}),i(e($),{id:"edit-email",modelValue:e(r).email,"onUpdate:modelValue":s[7]||(s[7]=u=>e(r).email=u),type:"email"},null,8,["modelValue"]),i(E,{message:e(r).errors.email||m.value.email},null,8,["message"])]),g("div",null,[i(e(C),{for:"edit-password"},{default:l(()=>s[34]||(s[34]=[d("Password (leave blank to keep current)")])),_:1,__:[34]}),i(e($),{id:"edit-password",modelValue:e(r).password,"onUpdate:modelValue":s[8]||(s[8]=u=>e(r).password=u),type:"password"},null,8,["modelValue"]),i(E,{message:e(r).errors.password||m.value.password},null,8,["message"])]),g("div",null,[i(e(C),{for:"edit-password_confirmation"},{default:l(()=>s[35]||(s[35]=[d("Confirm Password")])),_:1,__:[35]}),i(e($),{id:"edit-password_confirmation",modelValue:e(r).password_confirmation,"onUpdate:modelValue":s[9]||(s[9]=u=>e(r).password_confirmation=u),type:"password"},null,8,["modelValue"]),i(E,{message:e(r).errors.password_confirmation||m.value.password_confirmation},null,8,["message"])]),i(e(H),null,{default:l(()=>[i(e(V),{type:"button",variant:"outline",onClick:s[10]||(s[10]=u=>y.value=!1)},{default:l(()=>s[36]||(s[36]=[d("Cancel")])),_:1,__:[36]}),i(e(V),{type:"submit",disabled:e(r).processing},{default:l(()=>s[37]||(s[37]=[d("Update User")])),_:1,__:[37]},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),i(e(S),{open:w.value,"onUpdate:open":s[13]||(s[13]=u=>w.value=u)},{default:l(()=>[i(e(F),null,{default:l(()=>[i(e(R),null,{default:l(()=>[i(e(j),null,{default:l(()=>s[38]||(s[38]=[d("Delete User")])),_:1,__:[38]}),i(e(q),null,{default:l(()=>s[39]||(s[39]=[d(" Are you sure you want to delete this user? This action cannot be undone. ")])),_:1,__:[39]})]),_:1}),i(e(H),null,{default:l(()=>[i(e(V),{type:"button",variant:"outline",onClick:s[12]||(s[12]=u=>w.value=!1)},{default:l(()=>s[40]||(s[40]=[d("Cancel")])),_:1,__:[40]}),i(e(V),{type:"button",variant:"destructive",onClick:X},{default:l(()=>s[41]||(s[41]=[d("Delete User")])),_:1,__:[41]})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1})]),_:1}))}});export{Me as default};

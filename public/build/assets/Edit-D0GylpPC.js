import{d as L,x as S,b as E,c as U,o as g,g as l,u as e,p as B,w as o,a,h as r,l as X,t as u,j as M,i as N,F as z}from"./app-BjF1ciGN.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-DhqJuWPQ.js";import{a as h,_ as f}from"./index-f78_mURB.js";import{_ as p,a as v}from"./Label.vue_vue_type_script_setup_true_lang-ChkhZMeX.js";import{_ as I,a as O,b as T,c as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-CMaGS7su.js";import{_ as q}from"./CardDescription.vue_vue_type_script_setup_true_lang-ClcHaE8j.js";import{_ as b}from"./InputError.vue_vue_type_script_setup_true_lang-Cx4newd1.js";import{_ as A}from"./FileUpload.vue_vue_type_script_setup_true_lang-Dz_fpQwl.js";import{L as P}from"./loader-circle-BSZrsciP.js";import"./useForwardExpose-ef9a8bio.js";import"./RovingFocusGroup-V17Yudn7.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=h("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),R={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},G={class:"flex items-center gap-4"},J={class:"space-y-2"},K={class:"space-y-2"},Q={class:"space-y-2"},W={class:"text-xs text-muted-foreground"},Y={class:"flex gap-4 pt-4"},fe=L({__name:"Edit",props:{form:{}},setup(y){const n=y,w=[{title:"Forms",href:"/forms"},{title:"Edit",href:`/forms/${n.form.id}/edit`}],t=S({name:n.form.name,date:n.form.date,file:null,_method:"PUT"}),m=E(null);function $(d){var x;const i=((x=d.target.files)==null?void 0:x[0])??t.file;if(!i){m.value="Please select a file.",t.file=null;return}const c=i.name.toLowerCase(),_=c.split(".").pop(),k=["csv","xls","xlsx"],F=/\.(?:csv|xls|xlsx)\.(?:csv|xls|xlsx)$/i;!_||!k.includes(_)||F.test(c)?(m.value="Invalid file type. Only CSV, XLS, XLSX allowed.",t.file=null):(m.value=null,t.file=i)}function C(){window.location.href=route("forms.downloadCsv")}function V(){t.post(route("forms.update",n.form.id),{forceFormData:!0})}return(d,s)=>(g(),U(z,null,[l(e(B),{title:"Edit Form"}),l(D,{breadcrumbs:w},{default:o(()=>[a("div",R,[a("div",G,[l(e(f),{variant:"outline",size:"sm",onClick:s[0]||(s[0]=i=>d.$inertia.visit(d.route("forms.index"))),class:"flex items-center gap-2"},{default:o(()=>[l(e(H),{class:"h-4 w-4"}),s[5]||(s[5]=r(" Back to Forms "))]),_:1,__:[5]}),s[6]||(s[6]=a("div",{class:"flex flex-col space-y-2"},[a("h1",{class:"text-2xl font-semibold tracking-tight"},"Edit Form"),a("p",{class:"text-muted-foreground"}," Update your form information below. ")],-1))]),l(e(I),{class:"max-w-2xl"},{default:o(()=>[l(e(O),{class:"flex justify-between items-center"},{default:o(()=>[a("div",null,[l(e(T),null,{default:o(()=>s[7]||(s[7]=[r("Edit Form Submission")])),_:1,__:[7]}),l(e(q),null,{default:o(()=>s[8]||(s[8]=[r(" Modify your name, date, and optionally update the file. ")])),_:1,__:[8]})]),l(e(f),{variant:"outline",size:"sm",onClick:C},{default:o(()=>s[9]||(s[9]=[r(" Download Template ")])),_:1,__:[9]})]),_:1}),l(e(j),null,{default:o(()=>[a("form",{onSubmit:X(V,["prevent"]),class:"space-y-6"},[a("div",J,[l(e(p),{for:"name"},{default:o(()=>s[10]||(s[10]=[r("Name *")])),_:1,__:[10]}),l(e(v),{id:"name",modelValue:e(t).name,"onUpdate:modelValue":s[1]||(s[1]=i=>e(t).name=i),type:"text",placeholder:"Enter your full name",required:"",disabled:e(t).processing},null,8,["modelValue","disabled"]),l(b,{message:e(t).errors.name},null,8,["message"])]),a("div",K,[l(e(p),{for:"date"},{default:o(()=>s[11]||(s[11]=[r("Date *")])),_:1,__:[11]}),l(e(v),{id:"date",modelValue:e(t).date,"onUpdate:modelValue":s[2]||(s[2]=i=>e(t).date=i),type:"date",required:"",disabled:e(t).processing},null,8,["modelValue","disabled"]),l(b,{message:e(t).errors.date},null,8,["message"])]),a("div",Q,[l(e(p),null,{default:o(()=>[r(u(n.form.file_original_name?"Replace File (Optional)":"File Upload (Optional)"),1)]),_:1}),l(A,{modelValue:e(t).file,"onUpdate:modelValue":s[3]||(s[3]=i=>e(t).file=i),error:m.value??e(t).errors.file,accept:".csv,.xls,.xlsx",onChange:$,"max-size":10,placeholder:n.form.file_original_name?"Choose a new file to replace current one":"Choose a file or drag and drop"},null,8,["modelValue","error","placeholder"]),a("p",W," Supported formats: XLSX, XLS, CSV (Max: 10MB) "+u(n.form.file_original_name?" â€“ Leave empty to keep current file":""),1)]),a("div",Y,[l(e(f),{type:"submit",disabled:e(t).processing,class:"flex items-center gap-2"},{default:o(()=>[e(t).processing?(g(),M(e(P),{key:0,class:"h-4 w-4 animate-spin"})):N("",!0),r(" "+u(e(t).processing?"Updating...":"Update Form"),1)]),_:1},8,["disabled"]),l(e(f),{type:"button",variant:"outline",disabled:e(t).processing,onClick:s[4]||(s[4]=i=>d.$inertia.visit(d.route("forms.index")))},{default:o(()=>s[12]||(s[12]=[r(" Cancel ")])),_:1,__:[12]},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1})],64))}});export{fe as default};

import{_ as ie}from"./AppLayout.vue_vue_type_script_setup_true_lang-UWRjaSCJ.js";import{d as F,c as k,o as b,a as u,r as j,b as $,e as ae,f as re,g as a,u as t,w as l,h as s,i as A,t as v,j as Q,F as Z,k as se,l as fe,m as U,n as _e,p as ce}from"./app-CpWbJJER.js";import{_ as B,a as z,b as q,c as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-DNeIjIFJ.js";import{_ as T,c as me}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cn4VzyVq.js";import{_ as I,a as N}from"./Label.vue_vue_type_script_setup_true_lang-C-ZKzuk9.js";import{_ as pe,a as ve,b as ge,c as be,d as ye}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DxczNayY.js";import"./useForwardExpose-BI4lYtN6.js";import"./RovingFocusGroup-D0-6ITzG.js";var xe=typeof global=="object"&&global&&global.Object===Object&&global,ke=typeof self=="object"&&self&&self.Object===Object&&self,de=xe||ke||Function("return this")(),H=de.Symbol,ue=Object.prototype,Ce=ue.hasOwnProperty,$e=ue.toString,R=H?H.toStringTag:void 0;function Ie(n){var r=Ce.call(n,R),c=n[R];try{n[R]=void 0;var g=!0}catch{}var y=$e.call(n);return g&&(r?n[R]=c:delete n[R]),y}var Ne=Object.prototype,De=Ne.toString;function Te(n){return De.call(n)}var Ve="[object Null]",Oe="[object Undefined]",ne=H?H.toStringTag:void 0;function Ee(n){return n==null?n===void 0?Oe:Ve:ne&&ne in Object(n)?Ie(n):Te(n)}function je(n){return n!=null&&typeof n=="object"}var Se="[object Symbol]";function we(n){return typeof n=="symbol"||je(n)&&Ee(n)==Se}var Ae=/\s/;function Re(n){for(var r=n.length;r--&&Ae.test(n.charAt(r)););return r}var Ue=/^\s+/;function Be(n){return n&&n.slice(0,Re(n)+1).replace(Ue,"")}function ee(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}var le=NaN,Le=/^[-+]0x[0-9a-f]+$/i,Fe=/^0b[01]+$/i,Me=/^0o[0-7]+$/i,Pe=parseInt;function oe(n){if(typeof n=="number")return n;if(we(n))return le;if(ee(n)){var r=typeof n.valueOf=="function"?n.valueOf():n;n=ee(r)?r+"":r}if(typeof n!="string")return n===0?n:+n;n=Be(n);var c=Fe.test(n);return c||Me.test(n)?Pe(n.slice(2),c?2:8):Le.test(n)?le:+n}var Y=function(){return de.Date.now()},he="Expected a function",We=Math.max,ze=Math.min;function qe(n,r,c){var g,y,x,i,m,p,_=0,f=!1,C=!1,S=!0;if(typeof n!="function")throw new TypeError(he);r=oe(r)||0,ee(c)&&(f=!!c.leading,C="maxWait"in c,x=C?We(oe(c.maxWait)||0,r):x,S="trailing"in c?!!c.trailing:S);function V(e){var o=g,O=y;return g=y=void 0,_=e,i=n.apply(O,o),i}function M(e){return _=e,m=setTimeout(w,r),f?V(e):i}function X(e){var o=e-p,O=e-_,te=r-o;return C?ze(te,x-O):te}function P(e){var o=e-p,O=e-_;return p===void 0||o>=r||o<0||C&&O>=x}function w(){var e=Y();if(P(e))return h(e);m=setTimeout(w,X(e))}function h(e){return m=void 0,S&&g?V(e):(g=y=void 0,i)}function J(){m!==void 0&&clearTimeout(m),_=0,g=p=y=m=void 0}function K(){return m===void 0?i:h(Y())}function d(){var e=Y(),o=P(e);if(g=arguments,y=this,p=e,o){if(m===void 0)return M(p);if(C)return clearTimeout(m),m=setTimeout(w,r),V(p)}return m===void 0&&(m=setTimeout(w,r)),i}return d.cancel=J,d.flush=K,d}const He={class:"relative w-full overflow-auto"},Ge={class:"w-full caption-bottom text-sm"},Xe=F({__name:"Table",setup(n){return(r,c)=>(b(),k("div",He,[u("table",Ge,[j(r.$slots,"default")])]))}}),G=(n,r)=>{const c=n.__vccOpts||n;for(const[g,y]of r)c[g]=y;return c},Je={},Ke={class:"border-b"};function Qe(n,r){return b(),k("thead",Ke,[j(n.$slots,"default")])}const Ye=G(Je,[["render",Qe]]),Ze={class:"[&_tr:last-child]:border-0"},et=F({__name:"TableBody",setup(n){return(r,c)=>(b(),k("tbody",Ze,[j(r.$slots,"default")]))}}),tt={},at={class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"};function nt(n,r){return b(),k("tr",at,[j(n.$slots,"default")])}const W=G(tt,[["render",nt]]),lt={},ot={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"};function rt(n,r){return b(),k("th",ot,[j(n.$slots,"default")])}const E=G(lt,[["render",rt]]),st={},dt={class:"p-4 align-middle [&:has([role=checkbox])]:pr-0"};function ut(n,r){return b(),k("td",dt,[j(n.$slots,"default")])}const D=G(st,[["render",ut]]),it={class:"space-y-4"},ft={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},_t={class:"flex justify-between items-center mt-4"},ct={class:"overflow-x-auto"},mt={key:0,class:"ml-1"},pt={key:0,class:"ml-1"},vt={key:0,class:"ml-1"},gt={class:"flex justify-end space-x-2"},bt={key:0,class:"flex items-center justify-between px-4 py-4 border-t"},yt={class:"text-sm text-muted-foreground"},xt={class:"flex items-center space-x-2"},kt={class:"text-sm"},Ct=F({__name:"ClockingDataTable",setup(n){const r=$([]),c=$(!1),g=$(!1),y=$(!1),x=$(null),i=$({current_page:1,last_page:1,per_page:15,total:0,from:0,to:0}),m=ae({name:"",ac_no:"",date_from:"",date_to:""}),p=$("Date"),_=$("desc"),f=ae({AC_No:"",Name:"",Date:"",Clock_In:"",Clock_Out:"",Entry_ID:""}),C=async(d=1)=>{c.value=!0;try{const e={page:d,per_page:i.value.per_page,sort_by:p.value,sort_order:_.value,...m},o=await U.get("/api/clocking",{params:e});r.value=o.data.data,i.value={current_page:o.data.current_page,last_page:o.data.last_page,per_page:o.data.per_page,total:o.data.total,from:o.data.from,to:o.data.to}}catch(e){console.error("Error fetching data:",e)}finally{c.value=!1}},S=qe(()=>{C(1)},300),V=d=>{p.value===d?_.value=_.value==="asc"?"desc":"asc":(p.value=d,_.value="asc"),C(1)},M=d=>{d>=1&&d<=i.value.last_page&&C(d)},X=()=>{Object.assign(m,{name:"",ac_no:"",date_from:"",date_to:""}),C(1)},P=()=>{x.value=null,Object.assign(f,{AC_No:"",Name:"",Date:"",Clock_In:"",Clock_Out:"",Entry_ID:""}),y.value=!0},w=d=>{x.value=d,Object.assign(f,{AC_No:d.AC_No,Name:d.Name,Date:d.Date,Clock_In:d.Clock_In||"",Clock_Out:d.Clock_Out||"",Entry_ID:d.Entry_ID||""}),y.value=!0},h=async()=>{g.value=!0;try{const d={AC_No:parseInt(f.AC_No)||0,Name:f.Name,Date:f.Date,Clock_In:f.Clock_In||null,Clock_Out:f.Clock_Out||null,Entry_ID:parseInt(f.Entry_ID)||null};if(x.value){const e=await U.put(`/api/clocking/${x.value.id}`,d);console.log("Update response:",e.data)}else{const e=await U.post("/api/clocking",d);console.log("Create response:",e.data)}y.value=!1,C(i.value.current_page)}catch(d){console.error("Error saving record:",d),d.response&&(console.error("Response data:",d.response.data),console.error("Response status:",d.response.status))}finally{g.value=!1}},J=async d=>{if(confirm("Are you sure you want to delete this record?"))try{await U.delete(`/api/clocking/${d}`),C(i.value.current_page)}catch(e){console.error("Error deleting record:",e)}},K=d=>new Date(d).toLocaleDateString();return re(()=>{C()}),(d,e)=>(b(),k("div",it,[a(t(B),null,{default:l(()=>[a(t(z),null,{default:l(()=>[a(t(q),null,{default:l(()=>e[17]||(e[17]=[s("Filters")])),_:1,__:[17]})]),_:1}),a(t(L),null,{default:l(()=>[u("div",ft,[u("div",null,[a(t(I),{for:"name-filter"},{default:l(()=>e[18]||(e[18]=[s("Name")])),_:1,__:[18]}),a(t(N),{id:"name-filter",modelValue:m.name,"onUpdate:modelValue":e[0]||(e[0]=o=>m.name=o),placeholder:"Search by name...",onInput:t(S)},null,8,["modelValue","onInput"])]),u("div",null,[a(t(I),{for:"ac-no-filter"},{default:l(()=>e[19]||(e[19]=[s("AC No")])),_:1,__:[19]}),a(t(N),{id:"ac-no-filter",modelValue:m.ac_no,"onUpdate:modelValue":e[1]||(e[1]=o=>m.ac_no=o),placeholder:"Search by AC No...",onInput:t(S)},null,8,["modelValue","onInput"])]),u("div",null,[a(t(I),{for:"date-from"},{default:l(()=>e[20]||(e[20]=[s("Date From")])),_:1,__:[20]}),a(t(N),{id:"date-from",modelValue:m.date_from,"onUpdate:modelValue":e[2]||(e[2]=o=>m.date_from=o),type:"date",onChange:C},null,8,["modelValue"])]),u("div",null,[a(t(I),{for:"date-to"},{default:l(()=>e[21]||(e[21]=[s("Date To")])),_:1,__:[21]}),a(t(N),{id:"date-to",modelValue:m.date_to,"onUpdate:modelValue":e[3]||(e[3]=o=>m.date_to=o),type:"date",onChange:C},null,8,["modelValue"])])]),u("div",_t,[a(t(T),{onClick:X,variant:"outline"},{default:l(()=>e[22]||(e[22]=[s("Clear Filters")])),_:1,__:[22]}),a(t(T),{onClick:P},{default:l(()=>e[23]||(e[23]=[s("Add New Record")])),_:1,__:[23]})])]),_:1})]),_:1}),a(t(B),null,{default:l(()=>[a(t(L),{class:"p-0"},{default:l(()=>[u("div",ct,[a(t(Xe),null,{default:l(()=>[a(t(Ye),null,{default:l(()=>[a(t(W),null,{default:l(()=>[a(t(E),{onClick:e[4]||(e[4]=o=>V("AC_No")),class:"cursor-pointer hover:bg-muted/50"},{default:l(()=>[e[24]||(e[24]=s(" AC No ")),p.value==="AC_No"?(b(),k("span",mt,v(_.value==="asc"?"↑":"↓"),1)):A("",!0)]),_:1,__:[24]}),a(t(E),{onClick:e[5]||(e[5]=o=>V("Name")),class:"cursor-pointer hover:bg-muted/50"},{default:l(()=>[e[25]||(e[25]=s(" Name ")),p.value==="Name"?(b(),k("span",pt,v(_.value==="asc"?"↑":"↓"),1)):A("",!0)]),_:1,__:[25]}),a(t(E),{onClick:e[6]||(e[6]=o=>V("Date")),class:"cursor-pointer hover:bg-muted/50"},{default:l(()=>[e[26]||(e[26]=s(" Date ")),p.value==="Date"?(b(),k("span",vt,v(_.value==="asc"?"↑":"↓"),1)):A("",!0)]),_:1,__:[26]}),a(t(E),null,{default:l(()=>e[27]||(e[27]=[s("Clock In")])),_:1,__:[27]}),a(t(E),null,{default:l(()=>e[28]||(e[28]=[s("Clock Out")])),_:1,__:[28]}),a(t(E),null,{default:l(()=>e[29]||(e[29]=[s("Entry ID")])),_:1,__:[29]}),a(t(E),{class:"text-right"},{default:l(()=>e[30]||(e[30]=[s("Actions")])),_:1,__:[30]})]),_:1})]),_:1}),a(t(et),null,{default:l(()=>[c.value?(b(),Q(t(W),{key:0},{default:l(()=>[a(t(D),{colspan:"7",class:"text-center py-8"},{default:l(()=>e[31]||(e[31]=[u("div",{class:"flex items-center justify-center space-x-2"},[u("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),u("span",null,"Loading...")],-1)])),_:1,__:[31]})]),_:1})):r.value.length===0?(b(),Q(t(W),{key:1},{default:l(()=>[a(t(D),{colspan:"7",class:"text-center py-8 text-muted-foreground"},{default:l(()=>e[32]||(e[32]=[s(" No records found ")])),_:1,__:[32]})]),_:1})):(b(!0),k(Z,{key:2},se(r.value,o=>(b(),Q(t(W),{key:o.id},{default:l(()=>[a(t(D),null,{default:l(()=>[s(v(o.AC_No),1)]),_:2},1024),a(t(D),null,{default:l(()=>[s(v(o.Name),1)]),_:2},1024),a(t(D),null,{default:l(()=>[s(v(K(o.Date)),1)]),_:2},1024),a(t(D),null,{default:l(()=>[s(v(o.Clock_In||"-"),1)]),_:2},1024),a(t(D),null,{default:l(()=>[s(v(o.Clock_Out||"-"),1)]),_:2},1024),a(t(D),null,{default:l(()=>[s(v(o.Entry_ID||"-"),1)]),_:2},1024),a(t(D),{class:"text-right"},{default:l(()=>[u("div",gt,[a(t(T),{onClick:O=>w(o),size:"sm",variant:"outline"},{default:l(()=>e[33]||(e[33]=[s(" Edit ")])),_:2,__:[33]},1032,["onClick"]),a(t(T),{onClick:O=>J(o.id),size:"sm",variant:"destructive"},{default:l(()=>e[34]||(e[34]=[s(" Delete ")])),_:2,__:[34]},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),i.value.total>0?(b(),k("div",bt,[u("div",yt," Showing "+v(i.value.from)+" to "+v(i.value.to)+" of "+v(i.value.total)+" results ",1),u("div",xt,[a(t(T),{onClick:e[7]||(e[7]=o=>M(i.value.current_page-1)),disabled:i.value.current_page<=1,size:"sm",variant:"outline"},{default:l(()=>e[35]||(e[35]=[s(" Previous ")])),_:1,__:[35]},8,["disabled"]),u("span",kt," Page "+v(i.value.current_page)+" of "+v(i.value.last_page),1),a(t(T),{onClick:e[8]||(e[8]=o=>M(i.value.current_page+1)),disabled:i.value.current_page>=i.value.last_page,size:"sm",variant:"outline"},{default:l(()=>e[36]||(e[36]=[s(" Next ")])),_:1,__:[36]},8,["disabled"])])])):A("",!0)]),_:1})]),_:1}),a(t(pe),{open:y.value,"onUpdate:open":e[16]||(e[16]=o=>y.value=o)},{default:l(()=>[a(t(ve),{class:"sm:max-w-md"},{default:l(()=>[a(t(ge),null,{default:l(()=>[a(t(be),null,{default:l(()=>[s(v(x.value?"Edit Record":"Create New Record"),1)]),_:1})]),_:1}),u("form",{onSubmit:fe(h,["prevent"]),class:"space-y-4"},[u("div",null,[a(t(I),{for:"ac-no"},{default:l(()=>e[37]||(e[37]=[s("AC No")])),_:1,__:[37]}),a(t(N),{id:"ac-no",modelValue:f.AC_No,"onUpdate:modelValue":e[9]||(e[9]=o=>f.AC_No=o),modelModifiers:{number:!0},type:"number",placeholder:"Enter AC No...",required:""},null,8,["modelValue"])]),u("div",null,[a(t(I),{for:"entry-id"},{default:l(()=>e[38]||(e[38]=[s("Entry ID")])),_:1,__:[38]}),a(t(N),{id:"entry-id",modelValue:f.Entry_ID,"onUpdate:modelValue":e[10]||(e[10]=o=>f.Entry_ID=o),modelModifiers:{number:!0},type:"number",placeholder:"Enter Entry ID..."},null,8,["modelValue"])]),u("div",null,[a(t(I),{for:"clock-in"},{default:l(()=>e[39]||(e[39]=[s("Clock In")])),_:1,__:[39]}),a(t(N),{id:"clock-in",modelValue:f.Clock_In,"onUpdate:modelValue":e[11]||(e[11]=o=>f.Clock_In=o),type:"time",step:"1"},null,8,["modelValue"])]),u("div",null,[a(t(I),{for:"clock-out"},{default:l(()=>e[40]||(e[40]=[s("Clock Out")])),_:1,__:[40]}),a(t(N),{id:"clock-out",modelValue:f.Clock_Out,"onUpdate:modelValue":e[12]||(e[12]=o=>f.Clock_Out=o),type:"time",step:"1"},null,8,["modelValue"])]),u("div",null,[a(t(I),{for:"name"},{default:l(()=>e[41]||(e[41]=[s("Name *")])),_:1,__:[41]}),a(t(N),{id:"name",modelValue:f.Name,"onUpdate:modelValue":e[13]||(e[13]=o=>f.Name=o),required:""},null,8,["modelValue"])]),u("div",null,[a(t(I),{for:"date"},{default:l(()=>e[42]||(e[42]=[s("Date *")])),_:1,__:[42]}),a(t(N),{id:"date",modelValue:f.Date,"onUpdate:modelValue":e[14]||(e[14]=o=>f.Date=o),type:"date",required:""},null,8,["modelValue"])]),a(t(ye),null,{default:l(()=>[a(t(T),{type:"button",onClick:e[15]||(e[15]=o=>y.value=!1),variant:"outline"},{default:l(()=>e[43]||(e[43]=[s(" Cancel ")])),_:1,__:[43]}),a(t(T),{type:"submit",disabled:g.value},{default:l(()=>[s(v(g.value?"Saving...":x.value?"Update":"Create"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]))}}),$t=F({__name:"Badge",props:{class:{}},setup(n){const r=me("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),c=n;return(g,y)=>(b(),k("div",{class:_e(t(r)({variant:g.variant,class:c.class}))},[j(g.$slots,"default")],2))}}),It={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Nt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Dt={class:"text-2xl font-bold text-red-600"},Tt={key:0,class:"mt-3 space-y-1"},Vt={class:"font-medium"},Ot={key:0,class:"text-xs text-muted-foreground"},Et={class:"text-2xl font-bold text-blue-600"},jt={class:"text-2xl font-bold text-green-600"},St={class:"flex-1"},Pt=F({__name:"Dashboard",setup(n){const r=[{title:"Dashboard",href:"/dashboard"}],c=$(0),g=$(0),y=$(0),x=$([]),i=$(!1),m=async()=>{i.value=!0;try{const p=await U.get("/api/dashboard-stats");c.value=p.data.total_records,g.value=p.data.today_entries,y.value=p.data.currently_logged_in,x.value=p.data.logged_in_employees}catch(p){console.error("Error fetching stats:",p)}finally{i.value=!1}};return re(()=>{m()}),(p,_)=>(b(),k(Z,null,[a(t(ce),{title:"Dashboard"}),a(ie,{breadcrumbs:r},{default:l(()=>[u("div",It,[u("div",Nt,[a(t(B),{class:"border-l-4 border-l-red-500"},{default:l(()=>[a(t(z),{class:"pb-2"},{default:l(()=>[a(t(q),{class:"text-sm font-medium text-muted-foreground"},{default:l(()=>_[0]||(_[0]=[s(" Currently Logged In ")])),_:1,__:[0]})]),_:1}),a(t(L),null,{default:l(()=>[u("div",Dt,v(i.value?"...":y.value),1),_[1]||(_[1]=u("p",{class:"text-xs text-muted-foreground mt-1"}," Employees without clock out ",-1)),x.value.length>0?(b(),k("div",Tt,[(b(!0),k(Z,null,se(x.value.slice(0,3),f=>(b(),k("div",{key:f.AC_No,class:"flex items-center justify-between text-xs"},[u("span",Vt,v(f.Name),1),a(t($t),{variant:"outline",class:"text-xs"},{default:l(()=>[s(v(f.Clock_In),1)]),_:2},1024)]))),128)),x.value.length>3?(b(),k("div",Ot," +"+v(x.value.length-3)+" more ",1)):A("",!0)])):A("",!0)]),_:1,__:[1]})]),_:1}),a(t(B),{class:"border-l-4 border-l-blue-500"},{default:l(()=>[a(t(z),{class:"pb-2"},{default:l(()=>[a(t(q),{class:"text-sm font-medium text-muted-foreground"},{default:l(()=>_[2]||(_[2]=[s(" Today's Entries ")])),_:1,__:[2]})]),_:1}),a(t(L),null,{default:l(()=>[u("div",Et,v(i.value?"...":g.value),1),_[3]||(_[3]=u("p",{class:"text-xs text-muted-foreground mt-1"}," Clock entries for today ",-1))]),_:1,__:[3]})]),_:1}),a(t(B),{class:"border-l-4 border-l-green-500"},{default:l(()=>[a(t(z),{class:"pb-2"},{default:l(()=>[a(t(q),{class:"text-sm font-medium text-muted-foreground"},{default:l(()=>_[4]||(_[4]=[s(" Total Records ")])),_:1,__:[4]})]),_:1}),a(t(L),null,{default:l(()=>[u("div",jt,v(i.value?"...":c.value),1),_[5]||(_[5]=u("p",{class:"text-xs text-muted-foreground mt-1"}," All time clocking records ",-1))]),_:1,__:[5]})]),_:1})]),u("div",St,[a(Ct)])])]),_:1})],64))}});export{Pt as default};
